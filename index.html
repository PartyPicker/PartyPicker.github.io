<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Policy picker</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="style.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>


</head>
<body>

<div id="mainContentPanel">
<h1>POLICY PICKER</h1>
<h2>Pick the things you agree with</h2>

	<div class="topicbox" >
	        <button title="(average|sum|count)" type="button" class="btn btn-info topicbutton" data-toggle="collapse"
		        data-target="#Economy-info">
		    Economy
		</button>
		<div id="Economy-info" class="collapse">
		
		<div>
		    <button id="completed_toggle" type="button" class="btn btn-primary focus policybutton"  data-toggle="collapse"
		        data-target="#b1-q1-info">
			Increase the minimum wage to £8.10 in 2015 and £10 per hour by 2020
		    </button>
			<div id="b1-q1-info" class="collapse party-info">
			    <div class="green-support">Green</div>
			</div>
		</div>
		
		<div>
		    <button id="completed_toggle" type="button" class="btn btn-primary focus policybutton"  data-toggle="collapse"
		        data-target="#b1-q2-info">
			Introduce a maximum 35-hour working week
		    </button>
			<div id="b1-q2-info" class="collapse party-info">
			    <div class="green-support">Green</div>
			</div>
		    </div>
		</div>
	</div>
	
	

	<div class="topicbox" >
	        <button title="(average|sum|count)" type="button" class="btn btn-info topicbutton" data-toggle="collapse"
		        data-target="#Enviroment-info">
		    Enviroment
		</button>
		<div id="Enviroment-info" class="collapse">
		
		<div>
		    <button id="completed_toggle" type="button" class="btn btn-primary focus policybutton"  data-toggle="collapse"
		        data-target="#b2-q1-info">
			Spend more than £3bn to 2020 improving the environment
		    </button>
			<div id="b2-q1-info" class="collapse party-info">
			    <div class="tory-support">Tory</div>
			</div>
		</div>
		
		<div>
		    <button id="completed_toggle" type="button" class="btn btn-primary focus policybutton"  data-toggle="collapse"
		        data-target="#b2-q2-info">
			Reduce carbon emissions generated during electricity production to zero by 2030
		    </button>
			<div id="b2-q2-info" class="collapse party-info">
			    <div class="labor-support">Labour</div>
			</div>
		    </div>
		</div>
	</div>
	
	
        
        
        
</div>

<hr/>
<script>
//for each topic
function tallySupport() {
	var classes = ["green-support", "tory-support", "labour-support"];
	var limits = {"green-support":0, "tory-support":0, "labour-support":0};
	var results = {"green-support":0, "tory-support":0, "labour-support":0};

	for (var c in classes){
		var thisclass = classes[c];
		console.log(thisclass);
		var divs = document.getElementsByClassName(thisclass);
		for(var i = 0; i < divs.length; i++){
		//do something to each div like
		//divs[i].innerHTML = "something new...";
		//	count number of agreeing partys
			console.log(divs[i]);
			limits[thisclass]+=1
			 if(divs[i].parentElement.classList.contains("in"))
				results[thisclass]+=1
			/*var expanded = divs[i].getElementsByClassName("in");
			for(var j = 0; j < expanded.length; j++){
				console.log(expanded[j]);
				return expanded[j];		
			}*/
		//	update barchrt
		}
	}
	return results;
}
tallySupport();
</script>

</body>
</html>
